# ----- General -----

# Vim-style copy mode
setw -g mode-keys vi

# Better key handling
set -g xterm-keys on
set -g focus-events on
set -g allow-passthrough on

# Clipboard integration (important)
set -g set-clipboard on

# Use proper terminal type
set -g default-terminal "tmux-256color"
set -as terminal-features ",xterm-256color:RGB"

# Increase scrollback
set -g history-limit 20000

# Start windows and panes at 1
set -g base-index 1
setw -g pane-base-index 1

# ----- UI Styling -----

set -g status-style bg=black,fg=lightblue
set -g pane-border-style fg=grey
set -g pane-active-border-style fg=lightblue

# ----- REMOVE this line (causes weird behavior) -----
# set -g terminal-overrides 'xterm*:smcup@:rmcup@'

# ----- TPM -----

run '~/.tmux/plugins/tpm/tpm'

# Plugins
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Auto-save + auto-restore
set -g @continuum-restore 'on'
set -g @resurrect-strategy-nvim 'session'
set -g @continuum-save-interval '15'

# Manual save / restore
bind C-s run-shell '~/.tmux/plugins/tmux-resurrect/scripts/save.sh && tmux display-message "Resurrect saved!"'
bind C-r run-shell '~/.tmux/plugins/tmux-resurrect/scripts/restore.sh && tmux display-message "Resurrect restored!"'

# Reload config
bind r source-file ~/.tmux.conf \; display-message "tmux config reloaded!"
